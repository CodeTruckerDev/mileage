# mileage.kv

<MileageLayout>:

    orientation: 'vertical'
    padding: 20
    spacing: 10

    BoxLayout:
        orientation: 'vertical'
        size_hint_y: None
        height: '60dp'
        spacing: 10

        # Przycisk wybierajÄ…cy miesiÄ…c
        Button:
            text: "ğŸ“… Wybrany miesiÄ…c"
            font_size: '20sp'
            background_color: (1, 1, 0, 1)  # kolor Å¼Ã³Å‚ty
            on_press: root.show_month_selector()

        # WyÅ›wietla aktualnie wybrany miesiÄ…c (np. "Maj 2025")
        Label:
            text: root.selected_month_display
            font_size: '16sp'
            color: (1, 1, 0, 1)  # kolor Å¼Ã³Å‚ty

    # Informacja okreÅ›lajÄ…ca poczÄ…tek trasy
    Label:
        text: "PoczÄ…tek trasy"
        font_size: '16sp'
        size_hint_y: None
        height: self.texture_size[1] + 10

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: '50dp'
        spacing: 10

        # Pole do wpisania przebiegu poczÄ…tkowego
        TextInput:
            id: start_input
            text: root.start
            input_filter: 'int'
            input_type: 'number'
            hint_text: "Przebieg auta przy rozpoczÄ™ciu trasy"
            hint_text_color: 1, 1, 1, 1  # kolor biaÅ‚y
            background_color: (0, 1, 0, 1) if self.focus else (0, 0, 1, 1)  # kolor zielony jako aktywny i niebieski jako nieaktywny
            disabled: root.start_locked
            on_text: root.update_start(self.text)

        # Przycisk blokujÄ…cy/odblokujÄ…cy pole do wpisania przebiegu poczÄ…tkowego
        Button:
            id: lock_button
            text: "âœï¸" if root.start_locked else "âœ…"
            width: '50dp'
            on_press: root.unlock_start() if root.start_locked else root.lock_start()

    # Informacja okreÅ›lajÄ…ca koniec trasy
    Label:
        text: "Koniec trasy"
        font_size: '16sp'
        size_hint_y: None
        height: self.texture_size[1] + 10

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: '50dp'
        spacing: 10

        # Pole do wpisania przebiegu koÅ„cowego
        TextInput:
            id: end_input
            text: root.end
            input_filter: 'int'
            input_type: 'number'
            hint_text: "Przebieg auta po zakoÅ„czeniu trasy"
            hint_text_color: 1, 1, 1, 1  # kolor biaÅ‚y
            background_color: (1, 0, 0, 1) if self.focus else (0, 0, 1, 1)  # kolor czerwony jako aktywny i niebieski jako nieaktywny
            disabled: root.end_locked
            on_text: root.update_end(self.text)

        # Przycisk blokujÄ…cy/odblokujÄ…cy pole do wpisania przebiegu koÅ„cowego
        Button:
            text: "âœï¸" if root.end_locked else "âœ…"
            width: '50dp'
            on_press: root.unlock_end() if root.end_locked else root.lock_end()


    # Pole wyÅ›wietlajÄ…ce ostrzeÅ¼enie w przypadku, gdy wartoÅ›Ä‡ koÅ„cowa jest mniejsza niÅ¼ poczÄ…tkowa
    Label:
        bold: True
        text: root.warning_text
        color: (1, 0, 0, 1)  # ostrzeÅ¼enie w kolorze czerwonym
        font_size: '14sp'
        size_hint_y: None
        height: '30dp'

    # Informacja okreÅ›lajÄ…ca iloÅ›Ä‡ delegacji
    Label:
        text: "IloÅ›Ä‡ delegacji"
        font_size: '16sp'
        size_hint_y: None
        height: self.texture_size[1] + 10

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: '30dp'
        spacing: 10

        # Pole do wpisania iloÅ›ci delegacji
        TextInput:
            id: deleg_input
            text: "" if root.deleg == 0 else str(root.deleg)
            input_filter: 'int'
            input_type: 'number'
            hint_text: "IloÅ›Ä‡ delegacji"
            hint_text_color: 1, 1, 1, 1  # kolor biaÅ‚y
            background_color: (1, 0.5, 0, 1) if self.focus else (0, 0, 1, 1)  # kolor pomaraÅ„czowy jako aktywny i niebieski jako nieaktywny

            disabled: root.deleg_locked
            on_text: root.update_deleg(self.text)

        # Przycisk blokujÄ…cy/odblokujÄ…cy pole do wpisania iloÅ›ci delegacji
        Button:
            text: "âœï¸" if root.deleg_locked else "âœ…"
            width: '50dp'
            on_press: root.unlock_deleg() if root.deleg_locked else root.lock_deleg()

    BoxLayout:
        orientation: 'vertical'
        padding: '12dp'
        spacing: '8dp'

        # Pole opisujÄ…ce przebieg wprowadzanej trasy
        Label:
            text: "Obecna trasa: " + str(root.total_daily) + " km  -  Delegacji: " + str(root.deleg)
            size_hint_y: None
            font_size: '18sp'

        # Pole opisujÄ…ce przebieg sumaryczny dla caÅ‚ego miesiÄ…ca
        Label:
            text: "Razem: " + str(root.total) + " km  -  Delegacji: " + str(root.d_counter)
            size_hint_y: None
            font_size: '18sp'

        # Przycisk zapisujÄ…cy dane do bazy oraz zamykajÄ…cy aplikacjÄ™ po piÄ™ciu sekundach
        Button:
            id: confirm_button
            size_hint_y: None
            text: "Zapisz i wyjdÅº"
            height: '40dp'
            on_press: root.save()
